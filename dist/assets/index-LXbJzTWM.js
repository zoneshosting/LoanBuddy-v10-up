import{P as s,j as e,B as x,F as p,E as R,S as y,y as q,r as g,n as L,G as u,N as A,I,T as m,M as D}from"./index-CE-hhAG-.js";import{I as k}from"./IconPlus-D72lh6xW.js";import{b as B,c as w,d as E,T as v,a as o,e as M}from"./TableRow-HsnI2EQJ.js";import{I as N}from"./IconTrash-1sJSbluz.js";import{D as P,a as z,b as F,c as O}from"./DialogTitle-BTUi3-oS.js";import{I as f}from"./IconArrowUpRight-BwbNpO-M.js";const S=({sources:t,onAddClick:a,onToggleStatus:r,onDelete:i})=>e.jsxs(x,{children:[e.jsx(x,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(p,{variant:"contained",startIcon:e.jsx(k,{}),onClick:a,children:"Add Source"})}),e.jsx(B,{component:R,children:e.jsxs(w,{children:[e.jsx(E,{children:e.jsxs(v,{children:[e.jsx(o,{children:"Source Name"}),e.jsx(o,{align:"center",children:"Status"}),e.jsx(o,{align:"right",children:"Total Leads"}),e.jsx(o,{align:"right",children:"Conversion Rate"}),e.jsx(o,{align:"right",children:"Actions"})]})}),e.jsx(M,{children:t.map(n=>e.jsxs(v,{children:[e.jsx(o,{children:n.name}),e.jsx(o,{align:"center",children:e.jsx(y,{checked:n.active,onChange:()=>r(n.id)})}),e.jsx(o,{align:"right",children:n.totalLeads}),e.jsxs(o,{align:"right",children:[n.conversionRate,"%"]}),e.jsx(o,{align:"right",children:e.jsx(q,{color:"error",onClick:()=>i(n.id),children:e.jsx(N,{size:"1.1rem"})})})]},n.id))})]})})]});S.propTypes={sources:s.arrayOf(s.shape({id:s.number.isRequired,name:s.string.isRequired,active:s.bool.isRequired,totalLeads:s.number.isRequired,conversionRate:s.number.isRequired})).isRequired,onAddClick:s.func.isRequired,onToggleStatus:s.func.isRequired,onDelete:s.func.isRequired};const C=({open:t,onClose:a,onAdd:r})=>{const[i,n]=g.useState(""),[c,h]=g.useState(""),d=()=>{if(!i.trim()){h("Source name is required");return}r({name:i.trim(),active:!0,totalLeads:0,conversionRate:0}),n(""),h("")},l=()=>{n(""),h(""),a()};return e.jsxs(P,{open:t,onClose:l,maxWidth:"sm",fullWidth:!0,children:[e.jsx(z,{children:"Add New Lead Source"}),e.jsx(F,{children:e.jsx(L,{autoFocus:!0,margin:"dense",label:"Source Name",fullWidth:!0,value:i,onChange:b=>n(b.target.value),error:!!c,helperText:c})}),e.jsxs(O,{children:[e.jsx(p,{onClick:l,children:"Cancel"}),e.jsx(p,{onClick:d,variant:"contained",children:"Add Source"})]})]})};C.propTypes={open:s.bool.isRequired,onClose:s.func.isRequired,onAdd:s.func.isRequired};const j=({title:t,value:a,icon:r,trend:i})=>e.jsxs(R,{sx:{p:2},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(x,{children:[e.jsx(m,{variant:"h6",gutterBottom:!0,children:t}),e.jsx(m,{variant:"h4",children:a})]}),e.jsx(x,{sx:{color:"primary.main"},children:e.jsx(r,{size:48,stroke:1})})]}),i&&e.jsxs(x,{sx:{display:"flex",alignItems:"center",mt:1,color:"success.main"},children:[e.jsx(f,{size:"1rem"}),e.jsxs(m,{variant:"caption",sx:{ml:.5},children:[i,"% from last month"]})]})]});j.propTypes={title:s.string.isRequired,value:s.oneOfType([s.string,s.number]).isRequired,icon:s.elementType.isRequired,trend:s.number};const T=({sources:t})=>{const a=t.filter(n=>n.active).length,r=t.reduce((n,c)=>n+c.totalLeads,0),i=Math.round(t.reduce((n,c)=>n+c.conversionRate,0)/t.length);return e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,sm:6,md:4,children:e.jsx(j,{title:"Active Sources",value:a,icon:A,trend:12})}),e.jsx(u,{item:!0,xs:12,sm:6,md:4,children:e.jsx(j,{title:"Total Leads",value:r,icon:I,trend:8})}),e.jsx(u,{item:!0,xs:12,sm:6,md:4,children:e.jsx(j,{title:"Avg. Conversion Rate",value:`${i}%`,icon:f,trend:15})})]})};T.propTypes={sources:s.arrayOf(s.shape({active:s.bool.isRequired,totalLeads:s.number.isRequired,conversionRate:s.number.isRequired})).isRequired};const K=()=>{const[t,a]=g.useState(!1),[r,i]=g.useState([{id:1,name:"Website Form",active:!0,totalLeads:145,conversionRate:23},{id:2,name:"Referral Program",active:!0,totalLeads:89,conversionRate:35},{id:3,name:"Social Media",active:!0,totalLeads:67,conversionRate:18},{id:4,name:"Email Campaign",active:!1,totalLeads:42,conversionRate:15}]),n=d=>{i([...r,{...d,id:r.length+1}]),a(!1)},c=d=>{i(r.map(l=>l.id===d?{...l,active:!l.active}:l))},h=d=>{i(r.filter(l=>l.id!==d))};return e.jsxs(D,{title:"Lead Sources",children:[e.jsx(m,{variant:"body2",gutterBottom:!0,children:"Manage your lead sources and track their performance. Add new sources, monitor conversion rates, and optimize your lead generation channels."}),e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,children:e.jsx(T,{sources:r})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(S,{sources:r,onAddClick:()=>a(!0),onToggleStatus:c,onDelete:h})})]}),e.jsx(C,{open:t,onClose:()=>a(!1),onAdd:n})]})};export{K as default};
