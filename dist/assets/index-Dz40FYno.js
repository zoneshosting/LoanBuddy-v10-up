import{h as B,P as h,j as e,E as y,B as p,T as d,F as b,G as n,R as g,U as C,V as f,t as L,r as j,L as M,o as w,q as k,W as P,y as D,z,l as q,M as E}from"./index-CE-hhAG-.js";import{I as F}from"./IconRefresh-D9Bxd1pV.js";import{M as u}from"./MenuItem-CQThPHeq.js";import{I as V}from"./IconPlus-D72lh6xW.js";import{I as W}from"./IconDotsVertical-Bmxi7iEg.js";import{C as G}from"./react-apexcharts.min-CAiPBFOt.js";var A=B("device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);const R=[{value:"leads",label:"Lead Count"},{value:"conversion",label:"Conversion Rate"},{value:"volume",label:"Sales Volume"},{value:"revenue",label:"Revenue"},{value:"count",label:"Loan Count"}],J=[{value:"source",label:"Lead Source"},{value:"loanType",label:"Loan Type"},{value:"officer",label:"Loan Officer"},{value:"status",label:"Status"}],O=[{value:"bar",label:"Bar Chart"},{value:"line",label:"Line Chart"},{value:"pie",label:"Pie Chart"},{value:"table",label:"Table"}],T=({config:a,onConfigChange:s})=>{const o=t=>{s({...a,metrics:t.target.value})},r=t=>{s({...a,groupBy:t.target.value})},x=t=>{s({...a,chartType:t.target.value})};return e.jsxs(y,{sx:{p:2},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(d,{variant:"h6",children:"Report Builder"}),e.jsxs(p,{children:[e.jsx(b,{startIcon:e.jsx(F,{}),sx:{mr:1},children:"Reset"}),e.jsx(b,{variant:"contained",startIcon:e.jsx(A,{}),children:"Save Report"})]})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(C,{children:"Select Metrics"}),e.jsx(f,{multiple:!0,value:a.metrics,onChange:o,renderValue:t=>e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(l=>{var m;return e.jsx(L,{label:(m=R.find(c=>c.value===l))==null?void 0:m.label,size:"small"},l)})}),children:R.map(t=>e.jsx(u,{value:t.value,children:t.label},t.value))})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(C,{children:"Group By"}),e.jsx(f,{value:a.groupBy,onChange:r,children:J.map(t=>e.jsx(u,{value:t.value,children:t.label},t.value))})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(C,{children:"Chart Type"}),e.jsx(f,{value:a.chartType,onChange:x,children:O.map(t=>e.jsx(u,{value:t.value,children:t.label},t.value))})]})})]})]})};T.propTypes={config:h.object.isRequired,onConfigChange:h.func.isRequired};const S=({selectedReport:a,onReportSelect:s})=>{const[o,r]=j.useState(null),[x,t]=j.useState(null),l=[{id:1,name:"Monthly Lead Performance",description:"Lead volume and conversion by source",lastRun:"2024-02-15",config:{metrics:["leads","conversion"],filters:{dateRange:"month"},groupBy:"source",chartType:"bar"}},{id:2,name:"Sales by Loan Type",description:"Sales volume breakdown by loan type",lastRun:"2024-02-14",config:{metrics:["volume","count"],filters:{dateRange:"quarter"},groupBy:"loanType",chartType:"pie"}},{id:3,name:"Team Performance",description:"Individual loan officer performance metrics",lastRun:"2024-02-13",config:{metrics:["volume","conversion","revenue"],filters:{dateRange:"year"},groupBy:"officer",chartType:"line"}}],m=(i,v)=>{r(i.currentTarget),t(v)},c=()=>{r(null),t(null)};return e.jsxs(y,{sx:{p:2,height:"100%"},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(d,{variant:"h6",children:"Saved Reports"}),e.jsx(b,{variant:"contained",startIcon:e.jsx(V,{}),size:"small",children:"New Report"})]}),e.jsx(M,{children:l.map(i=>e.jsxs(w,{button:!0,selected:(a==null?void 0:a.id)===i.id,onClick:()=>s(i),children:[e.jsx(k,{primary:i.name,secondary:e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"caption",display:"block",children:i.description}),e.jsxs(d,{variant:"caption",color:"textSecondary",children:["Last run: ",i.lastRun]})]})}),e.jsx(P,{children:e.jsx(D,{edge:"end",onClick:v=>m(v,i),size:"small",children:e.jsx(W,{size:"1.1rem"})})})]},i.id))}),e.jsxs(z,{anchorEl:o,open:!!o,onClose:c,children:[e.jsx(u,{onClick:c,children:"Edit"}),e.jsx(u,{onClick:c,children:"Duplicate"}),e.jsx(u,{onClick:c,children:"Share"}),e.jsx(u,{onClick:c,children:"Delete"})]})]})};S.propTypes={selectedReport:h.object,onReportSelect:h.func.isRequired};const I=({config:a})=>{const s=q(),r=(()=>{switch(a.chartType){case"bar":return{series:[{name:"Value",data:[44,55,57,56,61,58]}],options:{chart:{type:"bar"},colors:[s.palette.primary.main],xaxis:{categories:["Category 1","Category 2","Category 3","Category 4","Category 5","Category 6"]}}};case"line":return{series:[{name:"Value",data:[30,40,35,50,49,60,70]}],options:{chart:{type:"line"},colors:[s.palette.primary.main],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul"]}}};case"pie":return{series:[44,55,13,43],options:{chart:{type:"pie"},labels:["Category 1","Category 2","Category 3","Category 4"],colors:[s.palette.primary.main,s.palette.secondary.main,s.palette.success.main,s.palette.warning.main]}};default:return null}})();return!a.chartType||!r?e.jsx(y,{sx:{p:2,minHeight:400,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(d,{variant:"body1",color:"textSecondary",children:"Select metrics and chart type to preview report"})}):e.jsxs(y,{sx:{p:2},children:[e.jsx(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(d,{variant:"h6",children:"Report Preview"})}),e.jsx(G,{options:r.options,series:r.series,type:a.chartType,height:400})]})};I.propTypes={config:h.object.isRequired};const Y=()=>{const[a,s]=j.useState(null),[o,r]=j.useState({metrics:[],filters:{},groupBy:"",chartType:""}),x=l=>{s(l),r(l.config)},t=l=>{r(l)};return e.jsxs(E,{title:"Custom Reports",children:[e.jsx(d,{variant:"body2",gutterBottom:!0,children:"Build and customize your own reports. Select metrics, filters, and visualizations to create tailored reports for your needs."}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(S,{selectedReport:a,onReportSelect:x})}),e.jsx(n,{item:!0,xs:12,md:8,children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(T,{config:o,onConfigChange:t})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(I,{config:o})})]})})]})]})};export{Y as default};
