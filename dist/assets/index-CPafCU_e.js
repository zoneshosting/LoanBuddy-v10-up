import{h as R,P as i,r as u,j as e,B as p,J as P,T as c,F as b,E as f,n as k,K as q,M as w,G as h}from"./index-CE-hhAG-.js";import{b as E,c as B,d as N,T as j,a as x,e as L}from"./TableRow-HsnI2EQJ.js";import{M as g}from"./MenuItem-CQThPHeq.js";var O=R("file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]);const y=({onFileSelect:s})=>{const a=u.useRef(null),l=()=>{var t;(t=a.current)==null||t.click()},o=t=>{const r=t.target.files[0];r&&s(r)};return e.jsxs(p,{sx:{border:"2px dashed",borderColor:"grey.300",borderRadius:1,p:3,textAlign:"center",cursor:"pointer","&:hover":{borderColor:"primary.main",bgcolor:"primary.lighter"}},onClick:l,children:[e.jsx("input",{type:"file",ref:a,onChange:o,accept:".csv,.xlsx,.xls",style:{display:"none"}}),e.jsx(P,{size:48,stroke:1}),e.jsx(c,{variant:"h6",sx:{mt:2},children:"Click to upload or drag and drop"}),e.jsx(c,{variant:"body2",color:"textSecondary",children:"CSV, Excel files are supported"}),e.jsx(b,{variant:"outlined",sx:{mt:2},children:"Select File"})]})};y.propTypes={onFileSelect:i.func.isRequired};const D=[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"source",label:"Lead Source"},{value:"status",label:"Status"}],v=({file:s,mappings:a,onMappingChange:l})=>{const o=["Name","Email Address","Phone Number","Source"],t=r=>d=>{l({...a,[r]:d.target.value})};return e.jsx(E,{component:f,children:e.jsxs(B,{children:[e.jsx(N,{children:e.jsxs(j,{children:[e.jsx(x,{children:"File Column"}),e.jsx(x,{children:"Maps To"}),e.jsx(x,{children:"Sample Data"})]})}),e.jsx(L,{children:o.map(r=>e.jsxs(j,{children:[e.jsx(x,{children:r}),e.jsx(x,{children:e.jsxs(k,{select:!0,fullWidth:!0,value:a[r]||"",onChange:t(r),children:[e.jsx(g,{value:"",children:e.jsx("em",{children:"Do not import"})}),D.map(d=>e.jsx(g,{value:d.value,children:d.label},d.value))]})}),e.jsx(x,{children:"Sample data here"})]},r))})]})})};v.propTypes={file:i.object.isRequired,mappings:i.object.isRequired,onMappingChange:i.func.isRequired};const I=({file:s,mappings:a,onImport:l,disabled:o})=>{const t=Object.values(a).filter(Boolean).length;return e.jsx(f,{sx:{p:2},children:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(p,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Import Summary"}),e.jsxs(c,{variant:"body2",color:"textSecondary",children:["File: ",s.name]}),e.jsxs(c,{variant:"body2",color:"textSecondary",children:["Mapped Fields: ",t]})]}),e.jsx(b,{variant:"contained",startIcon:e.jsx(O,{}),onClick:l,disabled:o,children:"Start Import"})]})})};I.propTypes={file:i.object.isRequired,mappings:i.object.isRequired,onImport:i.func.isRequired,disabled:i.bool};const S=({progress:s})=>e.jsxs(p,{sx:{width:"100%"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(p,{sx:{width:"100%",mr:1},children:e.jsx(q,{variant:"determinate",value:s})}),e.jsx(p,{sx:{minWidth:35},children:e.jsx(c,{variant:"body2",color:"text.secondary",children:`${Math.round(s)}%`})})]}),e.jsx(c,{variant:"caption",color:"text.secondary",children:"Importing leads... Please wait"})]});S.propTypes={progress:i.number.isRequired};const U=()=>{const[s,a]=u.useState(null),[l,o]=u.useState({}),[t,r]=u.useState(!1),[d,m]=u.useState(0),C=n=>{a(n),o({}),m(0)},T=n=>{o(n)},F=async()=>{r(!0);try{for(let n=0;n<=100;n+=10)await new Promise(M=>setTimeout(M,500)),m(n)}catch(n){console.error("Import error:",n)}finally{r(!1)}};return e.jsxs(w,{title:"Import Leads",children:[e.jsx(c,{variant:"body2",gutterBottom:!0,children:"Import leads from CSV or Excel files. Map your file columns to the correct fields and review before importing."}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(y,{onFileSelect:C})}),s&&e.jsxs(e.Fragment,{children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(v,{file:s,mappings:l,onMappingChange:T})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(I,{file:s,mappings:l,onImport:F,disabled:t||!Object.keys(l).length})}),t&&e.jsx(h,{item:!0,xs:12,children:e.jsx(S,{progress:d})})]})]})]})};export{U as default};
