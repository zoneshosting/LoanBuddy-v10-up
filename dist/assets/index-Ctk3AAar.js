import{h as y,P as s,j as e,B as j,F as C,E as T,S as k,O as f,y as v,r as g,G as x,n as S,M as A,T as R}from"./index-CE-hhAG-.js";import{I as q}from"./IconPlus-D72lh6xW.js";import{b as M,c as I,d as B,T as w,a,e as P}from"./TableRow-HsnI2EQJ.js";import{I as E}from"./IconTrash-1sJSbluz.js";import{D as U,a as O,b as F,c as W}from"./DialogTitle-BTUi3-oS.js";var z=y("arrow-down","IconArrowDown",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]]),N=y("arrow-up","IconArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]);const b=({stages:d,onAddClick:p,onUpdate:o,onDelete:t})=>{const h=r=>{o({...r,active:!r.active})},l=r=>{if(r===0)return;const n=[...d],u=n[r].order;n[r].order=n[r-1].order,n[r-1].order=u,n.sort((i,m)=>i.order-m.order),n.forEach(i=>o(i))},c=r=>{if(r===d.length-1)return;const n=[...d],u=n[r].order;n[r].order=n[r+1].order,n[r+1].order=u,n.sort((i,m)=>i.order-m.order),n.forEach(i=>o(i))};return e.jsxs(j,{children:[e.jsx(j,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(C,{variant:"contained",startIcon:e.jsx(q,{}),onClick:p,children:"Add Stage"})}),e.jsx(M,{component:T,children:e.jsxs(I,{children:[e.jsx(B,{children:e.jsxs(w,{children:[e.jsx(a,{children:"Order"}),e.jsx(a,{children:"Stage Name"}),e.jsx(a,{children:"Description"}),e.jsx(a,{align:"center",children:"Status"}),e.jsx(a,{align:"right",children:"Actions"})]})}),e.jsx(P,{children:d.map((r,n)=>e.jsxs(w,{children:[e.jsx(a,{children:r.order}),e.jsx(a,{children:r.name}),e.jsx(a,{children:r.description}),e.jsx(a,{align:"center",children:e.jsx(k,{checked:r.active,onChange:()=>h(r)})}),e.jsx(a,{align:"right",children:e.jsxs(j,{sx:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(f,{title:"Move Up",children:e.jsx(v,{onClick:()=>l(n),disabled:n===0,children:e.jsx(N,{size:"1.1rem"})})}),e.jsx(f,{title:"Move Down",children:e.jsx(v,{onClick:()=>c(n),disabled:n===d.length-1,children:e.jsx(z,{size:"1.1rem"})})}),e.jsx(f,{title:"Delete",children:e.jsx(v,{color:"error",onClick:()=>t(r.id),children:e.jsx(E,{size:"1.1rem"})})})]})})]},r.id))})]})})]})};b.propTypes={stages:s.arrayOf(s.shape({id:s.number.isRequired,name:s.string.isRequired,description:s.string.isRequired,order:s.number.isRequired,active:s.bool.isRequired})).isRequired,onAddClick:s.func.isRequired,onUpdate:s.func.isRequired,onDelete:s.func.isRequired};const D=({open:d,onClose:p,onAdd:o})=>{const[t,h]=g.useState({name:"",description:""}),[l,c]=g.useState({}),r=i=>m=>{h({...t,[i]:m.target.value}),c({...l,[i]:""})},n=()=>{const i={};if(t.name.trim()||(i.name="Stage name is required"),t.description.trim()||(i.description="Description is required"),Object.keys(i).length>0){c(i);return}o({name:t.name.trim(),description:t.description.trim(),active:!0}),h({name:"",description:""}),c({})},u=()=>{h({name:"",description:""}),c({}),p()};return e.jsxs(U,{open:d,onClose:u,maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Add New Pipeline Stage"}),e.jsx(F,{children:e.jsxs(x,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(S,{autoFocus:!0,label:"Stage Name",fullWidth:!0,value:t.name,onChange:r("name"),error:!!l.name,helperText:l.name})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(S,{label:"Description",fullWidth:!0,multiline:!0,rows:3,value:t.description,onChange:r("description"),error:!!l.description,helperText:l.description})})]})}),e.jsxs(W,{children:[e.jsx(C,{onClick:u,children:"Cancel"}),e.jsx(C,{onClick:n,variant:"contained",children:"Add Stage"})]})]})};D.propTypes={open:s.bool.isRequired,onClose:s.func.isRequired,onAdd:s.func.isRequired};const K=()=>{const[d,p]=g.useState(!1),[o,t]=g.useState([{id:1,name:"Application",description:"Initial loan application",order:1,active:!0},{id:2,name:"Processing",description:"Document collection and review",order:2,active:!0},{id:3,name:"Underwriting",description:"Risk assessment and evaluation",order:3,active:!0},{id:4,name:"Conditional Approval",description:"Pending final conditions",order:4,active:!0},{id:5,name:"Clear to Close",description:"Final approval stage",order:5,active:!0},{id:6,name:"Closed",description:"Loan has been funded",order:6,active:!0}]),h=r=>{t([...o,{...r,id:o.length+1,order:o.length+1}]),p(!1)},l=r=>{t(o.map(n=>n.id===r.id?r:n))},c=r=>{t(o.filter(n=>n.id!==r))};return e.jsxs(A,{title:"Pipeline Stages Management",children:[e.jsx(R,{variant:"body2",gutterBottom:!0,children:"Configure and manage your pipeline stages. Define the workflow for your mortgage process."}),e.jsx(x,{container:!0,spacing:3,children:e.jsx(x,{item:!0,xs:12,children:e.jsx(b,{stages:o,onAddClick:()=>p(!0),onUpdate:l,onDelete:c})})}),e.jsx(D,{open:d,onClose:()=>p(!1),onAdd:h})]})};export{K as default};
