import{P as x,r as u,j as e,E as R,B as S,T as g,F as C,$ as D,L,o as A,q as k,t as E,W as I,y as M,z as P,G as p,n as b,M as B}from"./index-CE-hhAG-.js";import{I as q}from"./IconDotsVertical-Bmxi7iEg.js";import{M as f}from"./MenuItem-CQThPHeq.js";import{D as V,a as z,b as F,c as O}from"./DialogTitle-BTUi3-oS.js";import{b as W,c as G,d as N,T as y,a as h,e as U}from"./TableRow-HsnI2EQJ.js";import{C as $}from"./Checkbox-Dt05oiZD.js";const v=({selectedRole:a,onRoleSelect:r,onAddClick:d})=>{const[n,c]=u.useState(null),[l,i]=u.useState(null),o=[{id:1,name:"Administrator",description:"Full system access",users:3},{id:2,name:"Manager",description:"Team and pipeline management",users:5},{id:3,name:"Loan Officer",description:"Lead and client management",users:12},{id:4,name:"Loan Processor",description:"Document processing",users:8}],m=(s,j)=>{c(s.currentTarget),i(j)},t=()=>{c(null),i(null)};return e.jsxs(R,{sx:{height:"100%"},children:[e.jsxs(S,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(g,{variant:"h6",children:"Roles"}),e.jsx(C,{variant:"contained",startIcon:e.jsx(D,{}),size:"small",onClick:d,children:"Add Role"})]}),e.jsx(L,{children:o.map(s=>e.jsxs(A,{button:!0,selected:(a==null?void 0:a.id)===s.id,onClick:()=>r(s),children:[e.jsx(k,{primary:e.jsxs(S,{sx:{display:"flex",alignItems:"center"},children:[s.name,e.jsx(E,{label:`${s.users} users`,size:"small",variant:"outlined",sx:{ml:1}})]}),secondary:s.description}),e.jsx(I,{children:e.jsx(M,{edge:"end",size:"small",onClick:j=>m(j,s),children:e.jsx(q,{size:"1.1rem"})})})]},s.id))}),e.jsxs(P,{anchorEl:n,open:!!n,onClose:t,children:[e.jsx(f,{onClick:t,children:"Edit Role"}),e.jsx(f,{onClick:t,children:"Duplicate Role"}),e.jsx(f,{onClick:t,children:"Delete Role"})]})]})};v.propTypes={selectedRole:x.object,onRoleSelect:x.func.isRequired,onAddClick:x.func.isRequired};const T=({open:a,onClose:r,onSubmit:d})=>{const[n,c]=u.useState({name:"",description:""}),[l,i]=u.useState({}),o=s=>j=>{c({...n,[s]:j.target.value}),i({...l,[s]:""})},m=()=>{const s={};if(n.name.trim()||(s.name="Role name is required"),n.description.trim()||(s.description="Description is required"),Object.keys(s).length>0){i(s);return}d(n),t()},t=()=>{c({name:"",description:""}),i({})};return e.jsxs(V,{open:a,onClose:()=>{r(),t()},maxWidth:"sm",fullWidth:!0,children:[e.jsx(z,{children:"Add New Role"}),e.jsx(F,{children:e.jsxs(p,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(b,{autoFocus:!0,label:"Role Name",fullWidth:!0,value:n.name,onChange:o("name"),error:!!l.name,helperText:l.name})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(b,{label:"Description",fullWidth:!0,multiline:!0,rows:3,value:n.description,onChange:o("description"),error:!!l.description,helperText:l.description})})]})}),e.jsxs(O,{children:[e.jsx(C,{onClick:r,children:"Cancel"}),e.jsx(C,{onClick:m,variant:"contained",children:"Add Role"})]})]})};T.propTypes={open:x.bool.isRequired,onClose:x.func.isRequired,onSubmit:x.func.isRequired};const H={leads:[{id:"leads.view",name:"View Leads"},{id:"leads.create",name:"Create Leads"},{id:"leads.edit",name:"Edit Leads"},{id:"leads.delete",name:"Delete Leads"}],clients:[{id:"clients.view",name:"View Clients"},{id:"clients.create",name:"Create Clients"},{id:"clients.edit",name:"Edit Clients"},{id:"clients.delete",name:"Delete Clients"}],loans:[{id:"loans.view",name:"View Loans"},{id:"loans.create",name:"Create Loans"},{id:"loans.edit",name:"Edit Loans"},{id:"loans.approve",name:"Approve Loans"}],reports:[{id:"reports.view",name:"View Reports"},{id:"reports.create",name:"Create Reports"},{id:"reports.export",name:"Export Reports"}],settings:[{id:"settings.view",name:"View Settings"},{id:"settings.edit",name:"Edit Settings"},{id:"settings.system",name:"System Settings"}]},w=({selectedRole:a})=>{const[r,d]=u.useState(!1),[n,c]=u.useState({}),l=o=>{c(m=>({...m,[o]:!m[o]})),d(!0)},i=()=>{console.log("Saving permissions:",n),d(!1)};return a?e.jsxs(R,{sx:{height:"100%"},children:[e.jsxs(S,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(g,{variant:"h6",children:["Permissions for ",a.name]}),e.jsx(C,{variant:"contained",disabled:!r,onClick:i,children:"Save Changes"})]}),e.jsx(W,{children:e.jsxs(G,{children:[e.jsx(N,{children:e.jsxs(y,{children:[e.jsx(h,{children:"Module/Feature"}),e.jsx(h,{children:"Permission"}),e.jsx(h,{align:"center",children:"Allowed"})]})}),e.jsx(U,{children:Object.entries(H).map(([o,m])=>m.map((t,s)=>e.jsxs(y,{children:[s===0&&e.jsx(h,{rowSpan:m.length,sx:{verticalAlign:"top",pt:2},children:e.jsx(g,{variant:"subtitle2",children:o.charAt(0).toUpperCase()+o.slice(1)})}),e.jsx(h,{children:t.name}),e.jsx(h,{align:"center",children:e.jsx($,{checked:n[t.id]||!1,onChange:()=>l(t.id)})})]},t.id)))})]})})]}):e.jsx(R,{sx:{p:3,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(g,{color:"textSecondary",children:"Select a role to view and edit permissions"})})};w.propTypes={selectedRole:x.object};const _=()=>{const[a,r]=u.useState(!1),[d,n]=u.useState(null),c=i=>{n(i)},l=i=>{console.log("Adding role:",i),r(!1)};return e.jsxs(B,{title:"Roles & Permissions",children:[e.jsx(g,{variant:"body2",gutterBottom:!0,children:"Define user roles and manage their permissions. Control access to different features and functionalities."}),e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{item:!0,xs:12,md:4,children:e.jsx(v,{selectedRole:d,onRoleSelect:c,onAddClick:()=>r(!0)})}),e.jsx(p,{item:!0,xs:12,md:8,children:e.jsx(w,{selectedRole:d})})]}),e.jsx(T,{open:a,onClose:()=>r(!1),onSubmit:l})]})};export{_ as default};
